"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var modular={hideContent:function hideContent(){return document.documentElement.style.display="none"},showContent:function showContent(){return document.documentElement.style.display="block"},err:function err(){for(var a=Array.from(arguments),c=0;c<arguments.length-1;c++)"--> "+a[c]+"\n";return b+="\n--> @ "+a[a.length-1],new Error(b)},info:function info(){for(var a=Array.from(arguments),c=0;c<arguments.length-1;c++)"--> "+a[c]+"\n";return b+="\n--> @ "+a[a.length-1],b},elemToObj:function elemToObj(elem){var obj={};return Array.from(elem.attributes).map(function(attr){var val=attr.value.trim();/{[^{}\n]*}/.test(val)&&(val=eval(val.slice(1,-1))),obj[attr.name]=val}),obj},getInstances:function getInstances(a){Object.entries(modular.components).map(function(b){var c=b[1];c.__data.instances=Array.from(a.getElementsByTagName(c.tag));c.__data.instances.map(function(d){var e=document.createElement("div");Array.from(d.attributes).map(function(f){return e.setAttribute(f.name,f.value)}),e.setAttribute("data-modular-id",c.tag),e.classList.add("__component__"),d.outerHTML=e.outerHTML})})},globalCSS:function globalCSS(a,b){var c=[],d=document.createElement("div");return Object.entries(b).map(function(e){"string"!=typeof e[1]&&(Object.assign(d.style,e[1]),e[1]=d.getAttribute("style")),c.push(e)}),c.map(function(e){return a+" "+e[0]+"{"+e[1]+"}"}).join(" ")},applyStyles:function applyStyles(){modular.styleTag.innerHTML="",Object.entries(modular.components).map(function(a){var b=a[1],c="div[data-modular-id=\""+b.tag+"\"]";b.css&&(modular.styleTag.innerHTML+=modular.globalCSS(c,b.css))})},renderContext:function renderContext(a){modular.getInstances(a);var b=Array.from(a.getElementsByClassName("__component__"));b.map(function(c){var d=modular.components[c.getAttribute("data-modular-id")];modular.tempEl.push(""),d.rendered=d.render(Object.assign(d.props,modular.elemToObj(c)||{})),modular.tempEl.pop(),c.innerHTML=d.rendered,modular.renderContext(c)})},addPlugin:function addPlugin(a){if(!a.name)throw modular.err("Invalid plugin.","A plugin must be of type \"object\".","A plugin must have a \"name\"-attribute","addPlugin()");modular.plugins.map(function(b){if(b.name==a.name)throw modular.err("Duplicate plugin: \""+a.name+"\".","addPlugin()")}),a._pluginInit_=performance.now()-modular.initPerf,modular.plugins.push(a),a.onInit&&a.onInit()},checkPlugin:function checkPlugin(a,b){var c=!1;return modular.plugins.map(function(d){d.name==a&&(c=!0)}),b&&console.warn(modular.info(""+(c?"Plugin loaded.":"Plugin not loaded."),"modular.checkPlugin()")),c},time:function time(){console.warn(modular.info("("+(performance.now()-modular.initPerf)+"ms)","modular.time()"))},components:{},tempEl:[],styleTag:document.createElement("style"),scriptTag:document.createElement("script"),plugins:[],initPerf:performance.now(),onRender:new Event("onRender"),afterRender:new Event("afterRender"),onInit:new Event("onInit"),afterInit:new Event("afterInit")};window.dispatchEvent(modular.onInit),modular.hideContent(),modular.scriptTag.setAttribute("onload","this.remove();"),document.head.appendChild(modular.styleTag),window.dispatchEvent(modular.afterInit),window.addEventListener("load",function(){return modular.showContent()});var Component=function a(b){if(_classCallCheck(this,a),"object"!==("undefined"==typeof b?"undefined":_typeof(b)))throw modular.err("Invalid Module-configuration.","Configuration must be of type \"object.\"","new Module()");if(!b.render||!b.tag)throw modular.err("Missing attributes.","The attributes \"tag\" and \"render()\" are required.","new Module()");Object.assign(this,b),this.props=b.props?b.props:{},this.__data={},this.__data.instances=[],modular.components[this.tag]=this};function render(){window.dispatchEvent(modular.onRender),modular.renderContext(document.documentElement),modular.applyStyles(),window.dispatchEvent(modular.afterRender)}function el(){var a="";return Array.from(arguments).map(function(b){return a+=b}),modular.tempEl[modular.tempEl.length-1]+=a,modular.tempEl[modular.tempEl.length-1]}